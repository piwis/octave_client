<template>
    <div class="introduction-tuto">

        <!--<span class="slider-numbers">{{ counter }} / 4</span>-->
        <!--<svg width="236" height="118" viewBox="0 0 236 118" fill="none" xmlns="http://www.w3.org/2000/svg">-->
        <!--<path d="M236 12.4453C236 5.5799 230.42 -2.43905e-07 223.555 -5.44002e-07L12.4453 -9.77189e-06C5.57991 -1.0072e-05 1.50149e-05 5.57989 1.47148e-05 12.4453L1.06448e-05 105.555C1.03447e-05 112.42 5.57991 118 12.4453 118L223.555 118C230.42 118 236 112.42 236 105.555L236 12.4453ZM231.506 85.6192C231.506 87.1942 230.2 88.5 228.625 88.5C227.05 88.5 225.859 87.1942 225.859 85.6192C225.859 84.0441 227.05 82.7383 228.625 82.7383C230.2 82.7383 231.506 84.0441 231.506 85.6192ZM230.238 50.0117L230.238 67.9883C230.238 68.8234 229.46 69.4863 228.625 69.4863C227.79 69.4863 227.127 68.8234 227.127 67.9883L227.127 50.0117C227.127 49.1766 227.79 48.5137 228.625 48.5137C229.46 48.5137 230.238 49.1766 230.238 50.0117ZM214.682 4.83984L214.682 113.16L19.7051 113.16L19.7051 4.83984L214.682 4.83984ZM14.8652 51.625L14.8652 66.375C14.8652 69.0593 12.7097 71.2148 10.0254 71.2148C7.34108 71.2148 5.18556 69.0593 5.18556 66.375L5.18556 51.625C5.18556 48.9407 7.34108 46.7852 10.0254 46.7852C12.7097 46.7852 14.8652 48.9407 14.8652 51.625Z"-->
        <!--fill="#323232"/>-->
        <!--</svg>-->

        <div class="slideshow">
            <div class="slide">
                <p>
                    Avancer
                </p>
                <p>
                    Incline ton smartphone vers l’avant.
                    Plus tu penche, plus je vais vite !
                </p>

                <div class="lottie">
                    <svg width="200" height="145" viewBox="0 0 200 145" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M180.5 85C178.5 79 175.271 74.5 169.453 74.5L30.5469 74.5C24.7287 74.5 21.6016 79.5 20 85.0469L1.266e-05 133.953C1.24057e-05 139.771 4.72874 144.5 10.5469 144.5L189.453 144.5C195.271 144.5 200 139.771 200 133.953L180.5 85ZM190.285 128C190.285 129.335 189.179 130.441 187.844 130.441C186.509 130.441 185.5 129.335 185.5 128C185.5 126.665 186.509 125.559 187.844 125.559C189.179 125.559 190.285 126.665 190.285 128ZM178.5 98.5L184 113.5C184 114.208 184.5 114.5 183.5 115C183 115.5 181.73 114.938 181.73 114.23L176 99.5C176 98.7923 175.5 98 176.5 97.5C177.5 97 178 98 178.5 98.5ZM161.934 78.6016L181.934 140.398L16.6992 140.398L36.6992 78.6016L161.934 78.6016ZM26.5 100L21.5 113C20.5 115.5 18 117 15.5 116C13.3984 115.159 13.5 113.275 13.5 111L19.5 97.5C20.5 95.5 22 93.9286 24.5 95C28 96.5 27 98.3984 26.5 100Z"
                              fill="#323232"/>
                        <path d="M99.5 57V3M99.5 3L89 13.5M99.5 3L110 13.5" stroke="black" stroke-width="3"/>
                    </svg>
                </div>
            </div>
            <div class="slide">
                <p>
                    Clique pour sélectionner une île
                </p>

                <div class="lottie">
                    <svg width="204" height="181" viewBox="0 0 204 181" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M182.255 51.4772C180.854 46.2491 175.466 43.1386 170.238 44.5394L9.4771 87.6152C4.24905 89.0161 1.13847 94.4037 2.53933 99.6318L21.5378 170.535C22.9387 175.763 28.3264 178.874 33.5544 177.473L194.315 134.397C199.544 132.996 202.654 127.609 201.253 122.381L182.255 51.4772ZM193.763 108.117C194.085 109.316 193.357 110.577 192.157 110.898C190.958 111.22 189.785 110.468 189.463 109.269C189.142 108.069 189.782 106.832 190.982 106.511C192.181 106.189 193.442 106.917 193.763 108.117ZM185.532 81.2599L189.2 94.9491C189.371 95.5851 188.914 96.2487 188.278 96.4191C187.642 96.5895 187.002 96.2199 186.831 95.584L183.163 81.8947C182.993 81.2588 183.362 80.6187 183.998 80.4483C184.634 80.2779 185.362 80.6239 185.532 81.2599ZM164.469 50.0355L186.571 132.522L38.0952 172.306L15.993 89.8195L164.469 50.0355ZM21.8537 126.434L24.8634 137.666C25.4111 139.711 24.2095 141.792 22.1653 142.34C20.1212 142.887 18.04 141.686 17.4922 139.641L14.4826 128.409C13.9348 126.365 15.1365 124.284 17.1806 123.736C19.2247 123.188 21.306 124.39 21.8537 126.434Z"
                              fill="#323232"/>
                        <path d="M140 27C127.121 8.13441 89.0909 -18.2774 40 27M40 27V18.6149M40 27H49.0909"
                              stroke="black" stroke-width="3"/>
                    </svg>

                </div>
            </div>
            <div class="slide">
                <p>
                    Scroll pour zoomer sur l’île choisie
                </p>
                <div class="draggerBounds">
                    <div class="dragger">Drag</div>
                </div>

            </div>
            <div class="slide">
                <p>
                    Clique sur la flèche pour quitter l’île
                </p>
                <div class="lottie">
                    <svg width="159" height="228" viewBox="0 0 159 228" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M57.666 210.823H54.6602V216H52.9639V203.203H57.2002C58.6416 203.203 59.749 203.531 60.5225 204.188C61.3018 204.844 61.6914 205.799 61.6914 207.053C61.6914 207.85 61.4746 208.544 61.041 209.136C60.6133 209.728 60.0156 210.17 59.248 210.463L62.2539 215.895V216H60.4434L57.666 210.823ZM54.6602 209.443H57.2529C58.0908 209.443 58.7559 209.227 59.248 208.793C59.7461 208.359 59.9951 207.779 59.9951 207.053C59.9951 206.262 59.7578 205.655 59.2832 205.233C58.8145 204.812 58.1348 204.598 57.2441 204.592H54.6602V209.443ZM67.7559 216.176C66.4668 216.176 65.418 215.754 64.6094 214.91C63.8008 214.061 63.3965 212.927 63.3965 211.509V211.21C63.3965 210.267 63.5752 209.426 63.9326 208.688C64.2959 207.943 64.7998 207.363 65.4443 206.947C66.0947 206.525 66.7979 206.314 67.5537 206.314C68.79 206.314 69.751 206.722 70.4365 207.536C71.1221 208.351 71.4648 209.517 71.4648 211.034V211.711H65.0225C65.0459 212.648 65.3184 213.407 65.8398 213.987C66.3672 214.562 67.0352 214.849 67.8438 214.849C68.418 214.849 68.9043 214.731 69.3027 214.497C69.7012 214.263 70.0498 213.952 70.3486 213.565L71.3418 214.339C70.5449 215.563 69.3496 216.176 67.7559 216.176ZM67.5537 207.65C66.8975 207.65 66.3467 207.891 65.9014 208.371C65.4561 208.846 65.1807 209.514 65.0752 210.375H69.8389V210.252C69.792 209.426 69.5693 208.787 69.1709 208.336C68.7725 207.879 68.2334 207.65 67.5537 207.65ZM74.8926 206.49L74.9453 207.686C75.6719 206.771 76.6211 206.314 77.793 206.314C79.8027 206.314 80.8164 207.448 80.834 209.716V216H79.208V209.707C79.2021 209.021 79.0439 208.515 78.7334 208.187C78.4287 207.858 77.9512 207.694 77.3008 207.694C76.7734 207.694 76.3105 207.835 75.9121 208.116C75.5137 208.397 75.2031 208.767 74.9805 209.224V216H73.3545V206.49H74.8926ZM85.4922 204.188V206.49H87.2676V207.747H85.4922V213.645C85.4922 214.025 85.5713 214.312 85.7295 214.506C85.8877 214.693 86.1572 214.787 86.5381 214.787C86.7256 214.787 86.9834 214.752 87.3115 214.682V216C86.8838 216.117 86.4678 216.176 86.0635 216.176C85.3369 216.176 84.7891 215.956 84.4199 215.517C84.0508 215.077 83.8662 214.453 83.8662 213.645V207.747H82.1348V206.49H83.8662V204.188H85.4922ZM93.7715 207.949C93.5254 207.908 93.2588 207.888 92.9717 207.888C91.9053 207.888 91.1816 208.342 90.8008 209.25V216H89.1748V206.49H90.7568L90.7832 207.589C91.3164 206.739 92.0723 206.314 93.0508 206.314C93.3672 206.314 93.6074 206.355 93.7715 206.438V207.949ZM99.0449 216.176C97.7559 216.176 96.707 215.754 95.8984 214.91C95.0898 214.061 94.6855 212.927 94.6855 211.509V211.21C94.6855 210.267 94.8643 209.426 95.2217 208.688C95.585 207.943 96.0889 207.363 96.7334 206.947C97.3838 206.525 98.0869 206.314 98.8428 206.314C100.079 206.314 101.04 206.722 101.726 207.536C102.411 208.351 102.754 209.517 102.754 211.034V211.711H96.3115C96.335 212.648 96.6074 213.407 97.1289 213.987C97.6562 214.562 98.3242 214.849 99.1328 214.849C99.707 214.849 100.193 214.731 100.592 214.497C100.99 214.263 101.339 213.952 101.638 213.565L102.631 214.339C101.834 215.563 100.639 216.176 99.0449 216.176ZM98.8428 207.65C98.1865 207.65 97.6357 207.891 97.1904 208.371C96.7451 208.846 96.4697 209.514 96.3643 210.375H101.128V210.252C101.081 209.426 100.858 208.787 100.46 208.336C100.062 207.879 99.5225 207.65 98.8428 207.65ZM109.24 207.949C108.994 207.908 108.728 207.888 108.44 207.888C107.374 207.888 106.65 208.342 106.27 209.25V216H104.644V206.49H106.226L106.252 207.589C106.785 206.739 107.541 206.314 108.52 206.314C108.836 206.314 109.076 206.355 109.24 206.438V207.949Z"
                              fill="black"/>
                        <g filter="url(#filter0_d)">
                            <circle cx="79.5" cy="148.5" r="39.5" transform="rotate(-90 79.5 148.5)" fill="white"/>
                            <circle cx="79.5" cy="148.5" r="38.5" transform="rotate(-90 79.5 148.5)" stroke="black"
                                    stroke-width="2"/>
                        </g>
                        <path d="M69.5991 165.535H90.4C90.8884 165.535 91.2999 165.133 91.2999 164.637V150.175C91.2999 148.918 92.3118 147.907 93.56 147.907C94.8169 147.907 95.8201 148.921 95.8201 150.173V167.789C95.8201 169.046 94.807 170.055 93.5572 170.055H66.4419C65.1959 170.055 64.179 169.041 64.179 167.789V150.173C64.179 148.916 65.1909 147.907 66.4391 147.907C67.696 147.907 68.6992 148.922 68.6992 150.175V164.637C68.6992 165.134 69.1021 165.535 69.5991 165.535ZM96.6931 145.269L80.6519 129.957C80.2874 129.609 79.7075 129.613 79.3472 129.957L63.306 145.269C62.4012 146.133 60.9727 146.098 60.1109 145.195C59.243 144.285 59.28 142.863 60.1801 142.004L78.3698 124.641C79.2612 123.79 80.7292 123.782 81.6293 124.641L99.819 142.004C100.71 142.855 100.75 144.292 99.8882 145.195C99.0203 146.104 97.5959 146.131 96.6931 145.269Z"
                              fill="black"/>
                        <path d="M12.0001 18.9456C34.6001 15.6268 79.7966 25.6851 79.7825 92.468M79.7825 92.468L85.9474 86.7844M79.7825 92.468L73.6204 85.7842"
                              stroke="black" stroke-width="3"/>
                        <defs>
                            <filter id="filter0_d" x="0" y="69" width="159" height="159" filterUnits="userSpaceOnUse"
                                    color-interpolation-filters="sRGB">
                                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                <feColorMatrix in="SourceAlpha" type="matrix"
                                               values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                <feOffset/>
                                <feGaussianBlur stdDeviation="20"/>
                                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0.8 0"/>
                                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                            </filter>
                        </defs>
                    </svg>

                </div>
            </div>
        </div>
        <button class="boxnav__item boxnav__item--prev">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="11.805px" height="16.805px">
                <path fill-rule="evenodd" stroke="rgb(0, 3, 135)" stroke-width="1.87px" stroke-linecap="butt"
                      stroke-linejoin="miter" fill="none"
                      d="M7.646,14.935 L0.936,7.936 L7.646,0.935 "/>
            </svg>
        </button>
        <button class="boxnav__item boxnav__item--next">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="11.805px" height="16.805px">
                <path fill-rule="evenodd" stroke="rgb(0, 3, 135)" stroke-width="1.87px" stroke-linecap="butt"
                      stroke-linejoin="miter" fill="none"
                      d="M2.963,0.935 L9.935,7.935 L2.963,14.935 "/>
            </svg>

        </button>


        <nav class="boxnav">
            <div class="boxnav__item boxnav__item--label">
                <span class="boxnav__label boxnav__label--current">1</span>
                <span class="espace">/</span>
                <span class="boxnav__label boxnav__label--total"></span>
            </div>

        </nav>


    </div>
</template>

<script>


    import Events from "../../static/datas/eventsOfCourse";
    import {Draggable} from 'gsap/Draggable'
    import Slideshow from "../utils/Slider";
    import * as UMath from "../utils/UMath";


    var GyroNorm = require('gyronorm');

    export default {
        name: 'introduction-view',

        data() {
            return {
                lookAtScreen: true,
                counter: 1,
                foward: false,
                leftAndRight: false,
                landscapeOrientation: false,
                unlockFoward:true,
                unlockLeftAndRight:true,
                posX: 0,
                posY: 0,
            }
        },

        sockets: {

            movingIntroduction: function (data) {
                this.slide.navigate('right')
            },
            turnIntroduction: function (data) {
                this.slide.navigate('right')
            },
            upIntroduction: function (data) {
                this.slide.navigate('right')
            },
            stopIntroduction: function (data) {
                this.slide.navigate('right')
                this.$router.push('understand-introduction-tuto')
            }
        },

        methods: {

            startIntroduction() {
                this.lookAtScreen = false;
                this.useHeadPhone = true;
                this.$socket.emit(Events.startIntroduction, true)
            },
            nextSlide() {
                this.counter++;
            },

        },

        mounted() {
            this.slide = new Slideshow(document.querySelector('.slideshow'));
        }

    };
</script>


<style scoped lang="scss">
    .slider-numbers {
        position: absolute;
        right: 30px;
        top: 30px;
    }
    .slide {
        width: 100%;
        height: 100%;
    }
    .introduction-tuto {
        text-align: center;
    }

    svg {
        margin: 0 auto;
    }

    .fade-enter-active, .fade-leave-active {
        transition: opacity .5s, visibility .5s;
    }

    .fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */
    {
        opacity: 0;
        visibility: hidden;
    }

    #canvas {
        width: 300px !important;
        height: 300px !important;
    }

    .draggerBounds {
        z-index: 101;
        position: relative;
        left: 30px;
        width: 50px;
        height: 250px;
        background: grey;
        margin: 20px;
    }

    .dragger {
        width: 50px;
        height: 50px;
        background: red;
        text-align: center;
        line-height: 50px;
        position: absolute;
    }

    .slideshow {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        max-width: 700px;
        width: 100%;
        margin: 0 auto;
    }

    .slide {
        position: absolute;
        opacity: 0;
    }

    .slide--current {
        opacity: 1;
        z-index: 100;
        position: relative;
    }

    .boxnav__item--prev, .boxnav__item--next {
        /*display: none;*/
    }

    .boxnav {
        position: absolute;
        right: 30px;
        top: 30px;
    }

</style>
